<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title> Retro 'EPOC Virus Tutorial' (VX heaven)</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<meta name="Author" content="Retro"/>
<meta name="KeyWords" lang="en" content="computer virus, virus, virii,vx, компьютерные вирусы, вирус, вири, Retro,EPOC Virus Tutorial, copy, test, dtext, system, youappname, dinit, retro, basic, dbuttons, folder, epoc, dialog, return, define, menu"/>
<meta name="Description" content="If you haven't heard of EPOC before, then I'll give you the background for it first. The EPOC OS was developed by a company called 'Symbian' and was used on Psion's handheld devices, these days Symbian have now started developing their Operating System for smartphones for example the Nokia 3650. OPL is a lanuage used on epoc for programming, and I see it as the same as the Basic lanuage on PC's. These days, programming for Symbian's new system requires you to know C++, like Cabair was coded in."/>
<script type="text/javascript">
//<![CDATA[
try{if (!window.CloudFlare) {var CloudFlare=[{verbose:0,p:0,byc:0,owlid:"cf",bag2:1,mirage2:0,oracle:0,paths:{cloudflare:"/cdn-cgi/nexp/dok3v=1613a3a185/"},atok:"047a5bcbf67431883fc9ed25fba33612",petok:"0f2b90db524b474cefa6181970ba704ffbbd2c43-1498756198-1800",zone:"vxheaven.org",rocket:"a",apps:{}}];document.write('<script type="text/javascript" src="//ajax.cloudflare.com/cdn-cgi/nexp/dok3v=85b614c0f6/cloudflare.min.js"><'+'\/script>');}}catch(e){};
//]]>
</script>
<link rel="icon" href="/favicon.ico" type="image/x-icon"/>
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
<link rel="stylesheet" type="text/css" href="/style.css"/><link rel="canonical" href="http://vxheaven.org/lib/vre02.html"/>
<script type="text/rocketscript" data-rocketsrc="https://apis.google.com/js/plusone.js">{"parsetags": "explicit"}</script>
</head>
<body bgcolor="#dbc8a0" text="#302000" link="#225599" vlink="#113366">
<div class="s1">
<div style="float:right;"><a href="/lib/index.php?tbs=1"><img src="/img/max.gif" alt="Maximize"/></a></div> <form id="lf" style="margin: 0; float: right;" method="get" action="/index.php"><input type="hidden" name="action" value="set"/><select name="lang" onchange="javascript:document.getElementById('lf').submit();"><option value="ru">Русский</option><option selected="selected" value="en">English</option><option value="ua">Українська</option><option value="de">Deutsch</option><option value="es">Español</option><option value="fr">Fran&ccedil;ais</option><option value="it">Italiano</option><option value="pl">Polski</option></select></form>
<div style="float: right;"><div id="plusone"></div></div>
<script type="text/rocketscript">gapi.plusone.render("plusone", {"size":"small","count":"true"});</script>
<div style="float: right;" class="addthis_toolbox addthis_default_style">
<script type="text/rocketscript">var addthis_config = { ui_click: true }</script>
<a style="text-decoration: none; font-size: 10pt;" href="/?action=addthis" class="addthis_button_compact">Bookmark</a>
<script type="text/rocketscript" data-rocketsrc="http://s7.addthis.com/js/250/addthis_widget.js#username=herm1t"></script>
</div>
<div style="float: right;">
<script type="text/rocketscript" data-rocketsrc="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script>
<form action="/search.php" id="cse-search-box">
<input type="hidden" name="cx" value="002577580816726040001:z9_irkorydo"/>
<input type="hidden" name="cof" value="FORID:10"/>
<input type="hidden" name="ie" value="UTF-8"/>
<input type="text" name="q" size="12" value=" "/>
<input type="submit" name="sa" value="Search"/>
</form>
</div><h1><a href="/" style="text-decoration: none; color: #000000;">VX Heaven</a></h1>
<span class="nav"><a href="/lib/">Library</a> <a href="/vl.php">Collection</a> <a href="/src.php">Sources</a> <a href="/vx.php?id=eidx">Engines</a> <a href="/vx.php?id=tidx">Constructors</a> <a href="/vx.php?id=sidx">Simulators</a> <a href="/vx.php?id=uidx">Utilities</a> <a href="/links.php">Links</a> <a href="/donate.php" style="color: #706020" id="donate">Donate</a> <a href="/forum" style="text-decoration: underline;">Forum</a> </span><br clear="all"/>
</div>
<div class="s2"><h1>EPOC Virus Tutorial</h1><p><a href="/lib/?lang=en&amp;author=Retro"> Retro</a><br/> <em><a href="/vx.php?fid=1413#f1413">Ready Rangers Liberation Front [6]</a></em><br/> <em>March 2005</em></p><script type="text/rocketscript">var disqus_url = 'http://vxheaven.org/lib/vre02.html';</script>[<a style="" href="/lib/?lang=EN&amp;index=WO#vre02">Back to index</a>] [<a href="/lib/vre02.html#disqus_thread">Comments</a>]<br/> 
<p>If you haven't heard of EPOC before, then I'll give you the background for it first. The EPOC OS was developed by a company called 'Symbian' and was used on Psion's handheld devices, these days Symbian have now started developing their Operating System for smartphones for example the Nokia 3650. OPL is a lanuage used on epoc for programming, and I see it as the same as the Basic lanuage on PC's. These days, programming for Symbian's new system requires you to know C++, like Cabair was coded in.</p>
<p>All the code written in this tutorial, was used on a Psion Revo, using EPOC Release 5, Twiddlebit's OPL+ compiler and IDE software.</p>
<p>When you compile your code under OPL+, and then use on other devices we need too define the OPL application, we can do this by using the following function.</p>
<pre class="source">
  APP caption, uid&amp;
  ...
  ENDA
</pre>
<p>Firstly <em>caption</em> is the application name, although <em>caption</em> is a string we do not need to enclose it in quotes.</p>
<p><em>uid&amp;</em> is the application's UID. In the OPL32 Manual it tells us that official reserved UIDs must be used, but this is not the case. UID's are used as a application ID in the menu. So if we say <em>app1</em> has the UID of 10, and your program <em>app2</em> has the same, then your program will overwrite <em>app1</em> in the menu.</p>
<p>When you compile your application using the <em>APP</em> function, it automaticly places your program to the folder <em>C:\System\Apps\YOUAPPNAME\youappname.app</em> and as doing so will add a shortcut to the menu. Now we have abit of knowledge of OPL lets start coding.</p>
<pre class="source">
  APP Orter,666
  ENDA

  PROC Main:
   ONERR Next::
     gVISIBLE OFF
     IF EXIST ("C:\System\Apps\test")
        dINIT "Epoc.test"
        dTEXT "","test virus",2
        dTEXT "","by retro",$202
        dBUTTONS "OK", %O | $100
        RETURN DIALOG=%O
     ELSE
        MKDIR "C:\System\Apps\test"
        COPY "Orter.app","C:\System\Apps\test"
        COPY Orter.app","C:\System\Temp"
     ENDIF
   Next::
  ENDP
</pre>
<p>This is a sample of the application, all that this code does is copy the application to a folder, which will then show up in the menu, and display a message. I have left out the spreading function for now as I will explain this in another tutorial.</p>
<p>All code has to be in functions, which tells the compiler where the code start and ends, and this can be done with <strong>PROC</strong> with the name which in the example above I have named it <strong><em>Main</em></strong> and used <strong>ENDP</strong> to end it.</p>
<p>The command <strong>ONERR</strong> is self-explanatory, if an error happens than it goto <strong><em>Next::</em></strong>. This command helps the flow of the code and exits itself if an error appears, without displaying error message to the user.</p>
<p>If you compile a simple app in opl, when it is run it always displays a console. We of course don't want this and so to get pass this 'slight' problem we can the use <strong>gVISIBLE OFF</strong>. This will hide the console window and only show the message box or any other GUI window we wish to display.</p>
<p>You should be-able to figure the next part of the example code. It starts to look for the folder which if you define, and if its there it'll display a message, but if not the app will create a new folder and copy itself to it. As I mentioned before, to display the app in the menu, it needs to in the 'C:\System\App\YouAppName\' folder which it will do.</p>
<p><strong>MKDIR</strong> creates the folder which we define and <strong>COPY</strong> will copy a file to the directory. If you look at the copy command it has two parameters. The first parameter tell it which file we want to copy and the second is where we wish to copy too. So <strong><em>COPY "test.app","C:\System"</em></strong> will copy the file 'test.app' too the system directory.</p>
<p><strong>Message Boxes</strong></p>
<p>Displaying message boxes isn't as easy as say the MessageBox command in cpp. All that the sample code below does is display a message box, and as you can see it's quite lengthy.</p>
<pre class="source">
  dINIT "Test Message "
  dTEXT "","Hello World arff!",$202
  dBUTTONS "OK", %O | $100
  RETURN DIALOG=%O
</pre>
<p><strong>dINIT</strong> - This initializes the message box, which we give a name too "Test Message"</p>
<p><strong>dTEXT</strong> - The first parameter, can be left as null its not needed, but the second line is the text in which we want displayed in the message. The third parameter is used for line info. <strong>$202</strong> tells the compile that it's the last line we want to display. If you add the number lines to each parameter.</p>
<pre class="source">
  dINIT "Test Message "
  dTEXT "","Hello",3
  dTEXT "","World!",2
  dTEXT "","arff!",$202
  dBUTTONS "OK", %O | $100
  RETURN DIALOG=%O
</pre>
<p><strong>dBUTTONS</strong> - This command adds the button which we want to display. I'm using the simple OK button but you can rename it too whatever you like. When you use buttons try and remember the following, as it can get abit hard to understand to start with.</p>
<table summary="dBUTTONS" border="1">
<tr><th>Name</th><th>1st Parameter</th><th>2nd Parameter</th></tr>
<tr><td>OK</td><td>%O</td><td>$100</td></tr>
<tr><td>CANCEL</td><td>%C</td><td>$200</td></tr>
</table>
<p><strong>RETURN DIALOG</strong> - Basic which button is returned.</p>
<p>So after reading this your have a basic understanding on how to code using opl, if you search the web your find very usefully information on this language but the best I've found is the OPL guide which comes along with OPL+</p>
<div align="right">
by Retro<br/>
10th March 2005<br/>
http://retro.host.sk<br/>
http://rrlf.de.vu<br/>
</div>
<div id="disqus_thread"></div>
<script type="text/rocketscript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'vxheaven'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
<div><small>By accessing, viewing, downloading or otherwise using this content you agree to be bound by the <a href="/agreement.php">Terms of Use</a>!</small> <small>vxheaven.org aka vx.netlux.org</small></div>
<div style="margin-top: 2px; float: left;" class="adsapeu">
<script type="text/rocketscript">
<!--
var _acic={dataProvider:10};(function(){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src="//www.acint.net/aci.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})()
//-->
</script>
</div>
<script data-rocketsrc="http://www.google-analytics.com/urchin.js" type="text/rocketscript"></script><script type="text/rocketscript">try { _uacct = "UA-590608-1"; urchinTracker(); } catch(err) {}</script>
<div style="display: none;"><a href="/lib/index.php?lang=de&amp;id=vre02">de</a><a href="/lib/index.php?lang=en&amp;id=vre02">en</a><a href="/lib/index.php?lang=es&amp;id=vre02">es</a><a href="/lib/index.php?lang=it&amp;id=vre02">it</a><a href="/lib/index.php?lang=fr&amp;id=vre02">fr</a><a href="/lib/index.php?lang=pl&amp;id=vre02">pl</a><a href="/lib/index.php?lang=ru&amp;id=vre02">ru</a><a href="/lib/index.php?lang=ua&amp;id=vre02">ua</a></div>
</body>
</html>
